{"version":3,"sources":["webpack:///bulbs-article-body.js","webpack:///./elements/bulbs-article-body/bulbs-article-body.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_defaults","obj","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_register","BulbsArticleBody","_BulbsHTMLElement","this","apply","arguments","addDingbat","querySelector","$lastElement","$","find","dingbat","text","prev","is","children","append","before","resizeIframes","window","iFrameResize","forEach","querySelectorAll","iframe","checkOrigin","attachedCallback","BulbsHTMLElement","extends","registerElement"],"mappings":"AAAAA,cAAc,IAER,SAAUC,EAAQC,EAASC,GAEhC,YAIA,SAASC,GAAUC,EAAKC,GAA6D,IAAK,GAAlDC,GAAOC,OAAOC,oBAAoBH,GAAoBI,EAAI,EAAGA,EAAIH,EAAKI,OAAQD,IAAK,CAAE,GAAIE,GAAML,EAAKG,GAAQG,EAAQL,OAAOM,yBAAyBR,EAAUM,EAAUC,IAASA,EAAME,cAA6BC,SAAbX,EAAIO,IAAsBJ,OAAOS,eAAeZ,EAAKO,EAAKC,GAAY,MAAOR,GAE5T,QAASa,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYrB,OAAOsB,OAAOF,GAAcA,EAAWC,WAAaE,aAAelB,MAAOc,EAAUK,YAAY,EAAOC,UAAU,EAAMlB,cAAc,KAAea,IAAYpB,OAAO0B,eAAiB1B,OAAO0B,eAAeP,EAAUC,GAAcxB,EAAUuB,EAAUC,ICdje,GAAAO,GAAAhC,EAAA,GAKMiC,EDWkB,SAAUC,GAG/B,QAASD,KAGP,MAFAlB,GAAgBoB,KAAMF,GAEfd,EAA2BgB,KAAMD,EAAkBE,MAAMD,KAAME,YAmDxE,MAxDAd,GAAUU,EAAkBC,GAQ5BD,EAAiBP,UClBlBY,WDkByC,WCjBvC,IAAIH,KAAKI,cAAc,iBAAvB,CAIA,GAAIC,GAAeC,EAAEN,MAAMO,KAAK,iBAC5BC,EAAU,oCAETH,GAAaI,SAChBJ,EAAeA,EAAaK,QAG1BL,EAAaM,GAAG,MAElBN,EAAaO,SAAS,iBAAiBC,OAAOL,GAEvCH,EAAaM,GAAG,OACnBN,EAAaE,KAAK,iBAAiBI,GAAG,KAExCN,EAAaE,KAAK,iBAAiBM,OAAOL,GAI1CH,EAAaQ,OAAOL,GAGfH,EAAaM,GAAG,OAEpBN,EAAaO,SAAS,MAAMvC,OAE7BgC,EAAaO,SAAS,iBAAiBE,OAAON,GAI9CH,EAAaQ,OAAOL,MDmBzBV,EAAiBP,UCdlBwB,cDc4C,WCbtCC,OAAOC,iBACNC,QAAQhC,KAAKc,KAAKmB,iBAAiB,gCAAiC,SAACC,GACtEJ,OAAOC,cAAeI,aAAa,GAASD,MDmBjDtB,EAAiBP,UCdlB+B,iBDc+C,WCb7CtB,KAAKG,aACLH,KAAKe,iBDiBCjB,GACPD,EAAU0B,iBCdbzB,GAAiB0B,QAAU,OAE3B,EAAA3B,EAAA4B,iBAAgB,qBAAsB3B","file":"bulbs-article-body.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _register = __webpack_require__(1);\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar BulbsArticleBody = function (_BulbsHTMLElement) {\n\t  _inherits(BulbsArticleBody, _BulbsHTMLElement);\n\t\n\t  function BulbsArticleBody() {\n\t    _classCallCheck(this, BulbsArticleBody);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsHTMLElement.apply(this, arguments));\n\t  }\n\t\n\t  BulbsArticleBody.prototype.addDingbat = function addDingbat() {\n\t    if (this.querySelector('.site-dingbat')) {\n\t      return;\n\t    }\n\t\n\t    var $lastElement = $(this).find('> :last-child');\n\t    var dingbat = '<span class=\"site-dingbat\"></span>';\n\t\n\t    if (!$lastElement.text()) {\n\t      $lastElement = $lastElement.prev();\n\t    }\n\t\n\t    if ($lastElement.is('ul')) {\n\t      // appends to this > ul > li:last-child\n\t      $lastElement.children('li:last-child').append(dingbat);\n\t    } else if ($lastElement.is('div')) {\n\t      if ($lastElement.find('> :last-child').is('p')) {\n\t        // appends to this > div > p:last-child\n\t        $lastElement.find('> :last-child').append(dingbat);\n\t      } else {\n\t        // appends to this > div:last-child\n\t        $lastElement.append(dingbat);\n\t      }\n\t    } else if ($lastElement.is('p')) {\n\t      // Handle extraneous br tags\n\t      if ($lastElement.children('br').length) {\n\t        // targets this > p:last-child > before br:last-child\n\t        $lastElement.children('br:last-child').before(dingbat);\n\t      } else {\n\t        // targets this > p:last-child\n\t        $lastElement.append(dingbat);\n\t      }\n\t    }\n\t  };\n\t\n\t  BulbsArticleBody.prototype.resizeIframes = function resizeIframes() {\n\t    if (window.iFrameResize) {\n\t      [].forEach.call(this.querySelectorAll('iframe.onionstudios-playlist'), function (iframe) {\n\t        window.iFrameResize({ checkOrigin: false }, iframe);\n\t      });\n\t    }\n\t  };\n\t\n\t  BulbsArticleBody.prototype.attachedCallback = function attachedCallback() {\n\t    this.addDingbat();\n\t    this.resizeIframes();\n\t  };\n\t\n\t  return BulbsArticleBody;\n\t}(_register.BulbsHTMLElement);\n\t\n\tBulbsArticleBody.extends = 'div';\n\t\n\t(0, _register.registerElement)('bulbs-article-body', BulbsArticleBody);\n\n/***/ })\n]);\n\n\n// WEBPACK FOOTER //\n// bulbs-article-body.js","import {\n  BulbsHTMLElement,\n  registerElement,\n} from 'bulbs-elements/register';\n\nclass BulbsArticleBody extends BulbsHTMLElement {\n\n  addDingbat () {\n    if (this.querySelector('.site-dingbat')) {\n      return;\n    }\n\n    let $lastElement = $(this).find('> :last-child');\n    let dingbat = '<span class=\"site-dingbat\"></span>';\n\n    if (!$lastElement.text()) {\n      $lastElement = $lastElement.prev();\n    }\n\n    if ($lastElement.is('ul')) {\n      // appends to this > ul > li:last-child\n      $lastElement.children('li:last-child').append(dingbat);\n    }\n    else if ($lastElement.is('div')) {\n      if ($lastElement.find('> :last-child').is('p')) {\n        // appends to this > div > p:last-child\n        $lastElement.find('> :last-child').append(dingbat);\n      }\n      else {\n        // appends to this > div:last-child\n        $lastElement.append(dingbat);\n      }\n    }\n    else if ($lastElement.is('p')) {\n      // Handle extraneous br tags\n      if($lastElement.children('br').length) {\n        // targets this > p:last-child > before br:last-child\n        $lastElement.children('br:last-child').before(dingbat);\n      }\n      else {\n        // targets this > p:last-child\n        $lastElement.append(dingbat);\n      }\n    }\n  }\n\n  resizeIframes () {\n    if (window.iFrameResize) {\n      [].forEach.call(this.querySelectorAll('iframe.onionstudios-playlist'), (iframe) => {\n        window.iFrameResize({ checkOrigin: false }, iframe);\n      });\n    }\n  }\n\n  attachedCallback () {\n    this.addDingbat();\n    this.resizeIframes();\n  }\n}\n\nBulbsArticleBody.extends = 'div';\n\nregisterElement('bulbs-article-body', BulbsArticleBody);\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-article-body/bulbs-article-body.js"],"sourceRoot":""}