{"version":3,"sources":["webpack:///notification-container.js","webpack:///./elements/notification-container/notification-container.js","webpack:///./elements/notification-container/notification-display.js","webpack:///./elements/notification-container/notification-session.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_extends","assign","target","arguments","source","hasOwnProperty","_bulbsElement","_bulbsElement2","_notificationDisplay","_notificationDisplay2","_notificationSession","_invariant","_invariant2","_react","_react2","_register","NotificationContainer","_BulbsElement","props","this","src","_this","session","NotificationSession","state","notificationIds","getItem","notification","requestNotifications","fetch","credentials","then","response","json","handleRequestSuccess","bind","componentDidMount","notifications","results","next","removeLocalNotifications","setState","concat","id","setItem","_this2","withoutLocal","forEach","indexOf","push","notificationsAreActive","active","render","createElement","closeContent","displayName","propTypes","PropTypes","string","isRequired","registerReactElement","502","_reactDom","_reactDom2","NotificationDisplay","deleteThis","display","findDOMNode","container","closest","remove","className","href","clickthrough_url","data-track-action","data-track-label","headline","body","clickthrough_cta","onClick","object","503","global","sessionKey","getSessionKey","ls","localStorage","JSON","parse","checkSession","site","window","location","hostname","split","now","Date","sessionStart","diff","newSession","sessionTime","ids","updateSession","stringify","504"],"mappings":"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","file":"notification-container.js","sourcesContent":["webpackJsonp([33],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _bulbsElement = __webpack_require__(260);\n\t\n\tvar _bulbsElement2 = _interopRequireDefault(_bulbsElement);\n\t\n\tvar _notificationDisplay = __webpack_require__(502);\n\t\n\tvar _notificationDisplay2 = _interopRequireDefault(_notificationDisplay);\n\t\n\tvar _notificationSession = __webpack_require__(503);\n\t\n\tvar _invariant = __webpack_require__(1);\n\t\n\tvar _invariant2 = _interopRequireDefault(_invariant);\n\t\n\tvar _react = __webpack_require__(183);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _register = __webpack_require__(2);\n\t\n\t__webpack_require__(504);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar NotificationContainer = function (_BulbsElement) {\n\t  _inherits(NotificationContainer, _BulbsElement);\n\t\n\t  function NotificationContainer(props) {\n\t    _classCallCheck(this, NotificationContainer);\n\t\n\t    (0, _invariant2.default)(!!props.src, 'notification-container component requires a src');\n\t\n\t    var _this = _possibleConstructorReturn(this, _BulbsElement.call(this, props));\n\t\n\t    _this.session = new _notificationSession.NotificationSession();\n\t    _this.state = {\n\t      notificationIds: _this.session.getItem('ids'),\n\t      notification: null\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  NotificationContainer.prototype.requestNotifications = function requestNotifications(src) {\n\t    fetch(src, { credentials: 'include' }).then(function (response) {\n\t      return response.json();\n\t    }).then(this.handleRequestSuccess.bind(this));\n\t  };\n\t\n\t  NotificationContainer.prototype.componentDidMount = function componentDidMount() {\n\t    this.requestNotifications(this.props.src);\n\t  };\n\t\n\t  NotificationContainer.prototype.handleRequestSuccess = function handleRequestSuccess(response) {\n\t    var notifications = response.results;\n\t    var next = response.next || null;\n\t    if (this.state.notificationIds.length > 0) {\n\t      notifications = this.removeLocalNotifications(notifications);\n\t    }\n\t\n\t    if (notifications.length > 0) {\n\t      this.setState({\n\t        notification: notifications[0],\n\t        notificationIds: this.state.notificationIds.concat([notifications[0].id])\n\t      });\n\t      this.session.setItem('ids', this.state.notificationIds);\n\t    } else if (next) {\n\t      this.requestNotifications(next);\n\t    }\n\t  };\n\t\n\t  NotificationContainer.prototype.removeLocalNotifications = function removeLocalNotifications(notifications) {\n\t    var _this2 = this;\n\t\n\t    var withoutLocal = [];\n\t    notifications.forEach(function (notification) {\n\t      if (_this2.state.notificationIds.indexOf(notification.id) === -1) {\n\t        withoutLocal.push(notification);\n\t      }\n\t    });\n\t    return withoutLocal;\n\t  };\n\t\n\t  NotificationContainer.prototype.notificationsAreActive = function notificationsAreActive() {\n\t    var active = this.session.getItem('active');\n\t    if (active === null) {\n\t      active = true;\n\t    }\n\t    return active;\n\t  };\n\t\n\t  NotificationContainer.prototype.render = function render() {\n\t    if (this.state.notification && this.notificationsAreActive()) {\n\t      return _react2.default.createElement(_notificationDisplay2.default, {\n\t        notification: this.state.notification,\n\t        closeContent: this.props.closeContent\n\t      });\n\t    }\n\t    return null;\n\t  };\n\t\n\t  return NotificationContainer;\n\t}(_bulbsElement2.default);\n\t\n\t_extends(NotificationContainer, {\n\t  displayName: 'NotificationContainer',\n\t  propTypes: {\n\t    closeContent: _react.PropTypes.string,\n\t    src: _react.PropTypes.string.isRequired\n\t  }\n\t});\n\t\n\t(0, _register.registerReactElement)('notification-container', NotificationContainer);\n\texports.default = NotificationContainer;\n\n/***/ },\n\n/***/ 502:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _bulbsElement = __webpack_require__(260);\n\t\n\tvar _bulbsElement2 = _interopRequireDefault(_bulbsElement);\n\t\n\tvar _invariant = __webpack_require__(1);\n\t\n\tvar _invariant2 = _interopRequireDefault(_invariant);\n\t\n\tvar _notificationSession = __webpack_require__(503);\n\t\n\tvar _react = __webpack_require__(183);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(37);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar NotificationDisplay = function (_BulbsElement) {\n\t  _inherits(NotificationDisplay, _BulbsElement);\n\t\n\t  function NotificationDisplay(props) {\n\t    _classCallCheck(this, NotificationDisplay);\n\t\n\t    (0, _invariant2.default)(!!props.notification, 'notification-display component requires notification');\n\t\n\t    var _this = _possibleConstructorReturn(this, _BulbsElement.call(this, props));\n\t\n\t    _this.session = new _notificationSession.NotificationSession();\n\t    return _this;\n\t  }\n\t\n\t  NotificationDisplay.prototype.deleteThis = function deleteThis() {\n\t    var display = _reactDom2.default.findDOMNode(this);\n\t    var container = display.closest('notification-container');\n\t    container.remove();\n\t    this.session.setItem('active', false);\n\t  };\n\t\n\t  NotificationDisplay.prototype.render = function render() {\n\t    if (this.props.notification) {\n\t      return _react2.default.createElement(\n\t        'div',\n\t        { className: 'notification-display' },\n\t        _react2.default.createElement(\n\t          'a',\n\t          {\n\t            href: this.props.notification.clickthrough_url,\n\t            'data-track-action': 'Notifications: Clickthrough',\n\t            'data-track-label': this.props.notification.clickthrough_url },\n\t          _react2.default.createElement('div', { className: 'notification-logo' }),\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'notification-content' },\n\t            _react2.default.createElement(\n\t              'div',\n\t              { className: 'notification-headline' },\n\t              this.props.notification.headline\n\t            ),\n\t            _react2.default.createElement(\n\t              'div',\n\t              { className: 'notification-body' },\n\t              _react2.default.createElement(\n\t                'p',\n\t                null,\n\t                this.props.notification.body,\n\t                _react2.default.createElement(\n\t                  'a',\n\t                  { className: 'notification-cta' },\n\t                  this.props.notification.clickthrough_cta\n\t                )\n\t              )\n\t            )\n\t          )\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          {\n\t            className: 'notification-close',\n\t            'data-track-action': 'Notifications: Close',\n\t            'data-track-label': '#',\n\t            onClick: this.deleteThis.bind(this) },\n\t          this.props.closeContent\n\t        )\n\t      );\n\t    }\n\t    return _react2.default.createElement('div', { className: 'inactive-notification-display' });\n\t  };\n\t\n\t  return NotificationDisplay;\n\t}(_bulbsElement2.default);\n\t\n\t_extends(NotificationDisplay, {\n\t  displayName: 'NotificationDisplay',\n\t  propTypes: {\n\t    closeContent: _react.PropTypes.string,\n\t    notification: _react.PropTypes.object.isRequired\n\t  }\n\t});\n\t\n\texports.default = NotificationDisplay;\n\n/***/ },\n\n/***/ 503:\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar NotificationSession = exports.NotificationSession = function () {\n\t  function NotificationSession() {\n\t    _classCallCheck(this, NotificationSession);\n\t\n\t    this.sessionKey = this.getSessionKey();\n\t    this.ls = global.localStorage;\n\t    this.session = JSON.parse(this.ls.getItem(this.sessionKey) || '{}');\n\t    this.checkSession();\n\t  }\n\t\n\t  NotificationSession.prototype.getSessionKey = function getSessionKey() {\n\t    var site = window.location.hostname.split('.com')[0] || 'onioninc';\n\t    return site + '-notificationsSession';\n\t  };\n\t\n\t  NotificationSession.prototype.checkSession = function checkSession() {\n\t    var now = Date.now();\n\t    if ('sessionStart' in this.session) {\n\t      var sessionStart = this.session.sessionStart || now;\n\t      var diff = (now - sessionStart) / 3600000;\n\t      if (diff > 12) {\n\t        this.newSession(now);\n\t      }\n\t    } else {\n\t      this.newSession(now);\n\t    }\n\t  };\n\t\n\t  NotificationSession.prototype.newSession = function newSession(sessionTime) {\n\t    this.session = {\n\t      active: true,\n\t      ids: [],\n\t      sessionStart: sessionTime\n\t    };\n\t  };\n\t\n\t  NotificationSession.prototype.updateSession = function updateSession() {\n\t    this.ls.setItem(this.sessionKey, JSON.stringify(this.session));\n\t  };\n\t\n\t  NotificationSession.prototype.setItem = function setItem(key, value) {\n\t    this.session[key] = value;\n\t    this.updateSession();\n\t  };\n\t\n\t  NotificationSession.prototype.getItem = function getItem(key) {\n\t    return this.session[key];\n\t  };\n\t\n\t  return NotificationSession;\n\t}();\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n\n/***/ 504:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// notification-container.js","import BulbsElement from 'bulbs-elements/bulbs-element';\nimport NotificationDisplay from './notification-display';\nimport { NotificationSession } from './notification-session.js';\nimport invariant from 'invariant';\nimport React, { PropTypes } from 'react';\nimport { registerReactElement } from 'bulbs-elements/register';\n\nimport './notification-container.scss';\n\nclass NotificationContainer extends BulbsElement {\n\n  constructor (props) {\n    invariant(!!props.src, 'notification-container component requires a src');\n    super(props);\n    this.session = new NotificationSession();\n    this.state = {\n      notificationIds: this.session.getItem('ids'),\n      notification: null,\n    };\n  }\n\n  requestNotifications (src) {\n    fetch(src, { credentials: 'include' })\n      .then(function (response) {\n        return response.json();\n      })\n      .then(this.handleRequestSuccess.bind(this));\n  }\n\n  componentDidMount () {\n    this.requestNotifications(this.props.src);\n  }\n\n  handleRequestSuccess (response) {\n    let notifications = response.results;\n    let next = response.next || null;\n    if (this.state.notificationIds.length > 0) {\n      notifications = this.removeLocalNotifications(notifications);\n    }\n\n    if (notifications.length > 0) {\n      this.setState({\n        notification: notifications[0],\n        notificationIds: this.state.notificationIds.concat([notifications[0].id]),\n      });\n      this.session.setItem('ids', this.state.notificationIds);\n    }\n    else if (next) {\n      this.requestNotifications(next);\n    }\n  }\n\n  removeLocalNotifications (notifications) {\n    let withoutLocal = [];\n    notifications.forEach((notification) => {\n      if (this.state.notificationIds.indexOf(notification.id) === -1) {\n        withoutLocal.push(notification);\n      }\n    });\n    return withoutLocal;\n  }\n\n  notificationsAreActive () {\n    let active = this.session.getItem('active');\n    if (active === null) {\n      active = true;\n    }\n    return active;\n  }\n\n  render () {\n    if (this.state.notification && this.notificationsAreActive()) {\n      return (\n        <NotificationDisplay\n          notification={ this.state.notification }\n          closeContent={ this.props.closeContent }\n        />\n      );\n    }\n    return null;\n  }\n\n}\n\nObject.assign(NotificationContainer, {\n  displayName: 'NotificationContainer',\n  propTypes: {\n    closeContent: PropTypes.string,\n    src: PropTypes.string.isRequired,\n  },\n});\n\nregisterReactElement('notification-container', NotificationContainer);\nexport default NotificationContainer;\n\n\n\n// WEBPACK FOOTER //\n// ./elements/notification-container/notification-container.js","import BulbsElement from 'bulbs-elements/bulbs-element';\nimport invariant from 'invariant';\nimport { NotificationSession } from './notification-session.js';\nimport React, { PropTypes } from 'react';\nimport ReactDOM from 'react-dom';\n\nclass NotificationDisplay extends BulbsElement {\n\n  constructor (props) {\n    invariant(!!props.notification, 'notification-display component requires notification');\n    super(props);\n    this.session = new NotificationSession();\n  }\n\n  deleteThis () {\n    let display = ReactDOM.findDOMNode(this);\n    let container = display.closest('notification-container');\n    container.remove();\n    this.session.setItem('active', false);\n  }\n\n  render () {\n    if (this.props.notification) {\n      return (\n        <div className=\"notification-display\">\n          <a\n            href={this.props.notification.clickthrough_url}\n            data-track-action=\"Notifications: Clickthrough\"\n            data-track-label={this.props.notification.clickthrough_url}>\n            <div className=\"notification-logo\"></div>\n            <div className=\"notification-content\">\n              <div className=\"notification-headline\">\n                { this.props.notification.headline }\n              </div>\n              <div className=\"notification-body\">\n                <p>{ this.props.notification.body }\n                  <a className=\"notification-cta\">\n                    { this.props.notification.clickthrough_cta }\n                  </a>\n                </p>\n              </div>\n            </div>\n          </a>\n          <div\n            className=\"notification-close\"\n            data-track-action=\"Notifications: Close\"\n            data-track-label=\"#\"\n            onClick={ this.deleteThis.bind(this) }>{ this.props.closeContent }</div>\n        </div>\n      );\n    }\n    return <div className=\"inactive-notification-display\"></div>;\n  }\n}\n\nObject.assign(NotificationDisplay, {\n  displayName: 'NotificationDisplay',\n  propTypes: {\n    closeContent: PropTypes.string,\n    notification: PropTypes.object.isRequired,\n  },\n});\n\nexport default NotificationDisplay;\n\n\n\n// WEBPACK FOOTER //\n// ./elements/notification-container/notification-display.js","\nexport class NotificationSession {\n\n  constructor () {\n    this.sessionKey = this.getSessionKey();\n    this.ls = global.localStorage;\n    this.session = JSON.parse(this.ls.getItem(this.sessionKey) || '{}');\n    this.checkSession();\n  }\n\n  getSessionKey () {\n    let site = window.location.hostname.split('.com')[0] || 'onioninc';\n    return site + '-notificationsSession';\n  }\n\n  checkSession () {\n    let now = Date.now();\n    if ('sessionStart' in this.session) {\n      let sessionStart = this.session.sessionStart || now;\n      let diff = (now - sessionStart) / 3600000;\n      if (diff > 12) { this.newSession(now); }\n    }\n    else {\n      this.newSession(now);\n    }\n  }\n\n  newSession (sessionTime) {\n    this.session = {\n      active: true,\n      ids: [],\n      sessionStart: sessionTime,\n    };\n  }\n\n  updateSession () {\n    this.ls.setItem(this.sessionKey, JSON.stringify(this.session));\n  }\n\n  setItem (key, value) {\n    this.session[key] = value;\n    this.updateSession();\n  }\n\n  getItem (key) {\n    return this.session[key];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./elements/notification-container/notification-session.js"],"sourceRoot":""}