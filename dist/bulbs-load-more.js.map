{"version":3,"sources":["webpack:///bulbs-load-more.js","webpack:///./elements/bulbs-load-more/bulbs-load-more.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","BulbsHTMLButtonElement","_util","_register","_invariant","_invariant2","HTMLButtonElement","LoadMore","_BulbsHTMLButtonEleme","this","apply","arguments","createdCallback","hasAttribute","attachedCallback","addEventListener","handleClick","bind","fillLoadingNotification","fetch","getAttribute","credentials","then","filterBadResponse","response","text","handleFetchSuccess","catch","handleFetchError","html","innerHTML","htmlText","outerHTML","extends","registerElement"],"mappings":"AAAAA,cAAc,KAER,SAAUC,EAAQC,EAASC,GAEhC,YAUA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAUH,EAAKI,GAA6D,IAAK,GAAlDC,GAAOC,OAAOC,oBAAoBH,GAAoBI,EAAI,EAAGA,EAAIH,EAAKI,OAAQD,IAAK,CAAE,GAAIE,GAAML,EAAKG,GAAQG,EAAQL,OAAOM,yBAAyBR,EAAUM,EAAUC,IAASA,EAAME,cAA6BC,SAAbd,EAAIU,IAAsBJ,OAAOS,eAAef,EAAKU,EAAKC,GAAY,MAAOX,GAE5T,QAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYrB,OAAOsB,OAAOF,GAAcA,EAAWC,WAAaE,aAAelB,MAAOc,EAAUK,YAAY,EAAOC,UAAU,EAAMlB,cAAc,KAAea,IAAYpB,OAAO0B,eAAiB1B,OAAO0B,eAAeP,EAAUC,GAAcvB,EAAUsB,EAAUC,ICjBje,QAASO,MALT,GAAAC,GAAApC,EAAA,KACAqC,EAAArC,EAAA,GACAsC,EAAAtC,EAAA,IDUKuC,EAActC,EAAuBqC,ECN1CH,GAAuBN,UAAYW,kBAAkBX,SDsBpD,ICpBKY,GDoBU,SAAUC,GAGvB,QAASD,KAGP,MAFAvB,GAAgByB,KAAMF,GAEfnB,EAA2BqB,KAAMD,EAAsBE,MAAMD,KAAME,YA+B5E,MApCAnB,GAAUe,EAAUC,GAQpBD,EAASZ,UC5BViB,gBD4BsC,YC3BpC,EAAAP,EAAAnC,SAAUuC,KAAKI,aAAa,OAC1B,+DD8BHN,EAASZ,UC3BVmB,iBD2BuC,WC1BrCL,KAAKM,iBAAiB,QAASN,KAAKO,YAAYC,KAAKR,QD8BtDF,EAASZ,UC3BVqB,YD2BkC,WC1BhCP,KAAKS,0BACLC,MAAMV,KAAKW,aAAa,QAAUC,YAAa,YAC5CC,KADHpB,EAAAqB,mBAEGD,KAAK,SAACE,GAAD,MAAcA,GAASC,SAC5BH,KAAKb,KAAKiB,mBAAmBT,KAAKR,OAClCkB,MAAMlB,KAAKmB,iBAAiBX,KAAKR,QD4BrCF,EAASZ,UCxBVuB,wBDwB8C,WCvB5C,GAAMW,GAAO,kDACbpB,MAAKqB,UAAYD,GD2BlBtB,EAASZ,UCxBV+B,mBDwByC,SCxBrBK,GAClBtB,KAAKuB,UAAYD,GD2BlBxB,EAASZ,UCxBViC,iBDwBuC,WCvBrCnB,KAAKuB,UAAY,4FD2BXzB,GCzDaN,EAkCvBM,GAAS0B,QAAU,UAEnB,EAAA9B,EAAA+B,iBAAgB,kBAAmB3B","file":"bulbs-load-more.js","sourcesContent":["webpackJsonp([13],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _util = __webpack_require__(189);\n\t\n\tvar _register = __webpack_require__(1);\n\t\n\tvar _invariant = __webpack_require__(36);\n\t\n\tvar _invariant2 = _interopRequireDefault(_invariant);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\t// We have to do this little dance to properly subclass elements in Safari\n\tfunction BulbsHTMLButtonElement() {}\n\tBulbsHTMLButtonElement.prototype = HTMLButtonElement.prototype;\n\t\n\tvar LoadMore = function (_BulbsHTMLButtonEleme) {\n\t  _inherits(LoadMore, _BulbsHTMLButtonEleme);\n\t\n\t  function LoadMore() {\n\t    _classCallCheck(this, LoadMore);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsHTMLButtonEleme.apply(this, arguments));\n\t  }\n\t\n\t  LoadMore.prototype.createdCallback = function createdCallback() {\n\t    (0, _invariant2.default)(this.hasAttribute('src'), '<button is=\"bulbs-load-more\"> MUST have a `src` attribute;');\n\t  };\n\t\n\t  LoadMore.prototype.attachedCallback = function attachedCallback() {\n\t    this.addEventListener('click', this.handleClick.bind(this));\n\t  };\n\t\n\t  LoadMore.prototype.handleClick = function handleClick() {\n\t    this.fillLoadingNotification();\n\t    fetch(this.getAttribute('src'), { credentials: 'include' }).then(_util.filterBadResponse).then(function (response) {\n\t      return response.text();\n\t    }).then(this.handleFetchSuccess.bind(this)).catch(this.handleFetchError.bind(this));\n\t  };\n\t\n\t  LoadMore.prototype.fillLoadingNotification = function fillLoadingNotification() {\n\t    var html = '<i class=\"fa fa-spinner fa-spin\"></i> Loading...';\n\t    this.innerHTML = html;\n\t  };\n\t\n\t  LoadMore.prototype.handleFetchSuccess = function handleFetchSuccess(htmlText) {\n\t    this.outerHTML = htmlText;\n\t  };\n\t\n\t  LoadMore.prototype.handleFetchError = function handleFetchError() {\n\t    this.outerHTML = '<span>There was an error fetching more content. Please reload page and try again.</span>';\n\t  };\n\t\n\t  return LoadMore;\n\t}(BulbsHTMLButtonElement);\n\t\n\tLoadMore.extends = 'button';\n\t\n\t(0, _register.registerElement)('bulbs-load-more', LoadMore);\n\n/***/ })\n]);\n\n\n// WEBPACK FOOTER //\n// bulbs-load-more.js","import { filterBadResponse } from 'bulbs-elements/util';\nimport { registerElement } from 'bulbs-elements/register';\nimport invariant from 'invariant';\n\n// We have to do this little dance to properly subclass elements in Safari\nfunction BulbsHTMLButtonElement () {}\nBulbsHTMLButtonElement.prototype = HTMLButtonElement.prototype;\n\nclass LoadMore extends BulbsHTMLButtonElement {\n  createdCallback () {\n    invariant(this.hasAttribute('src'),\n      '<button is=\"bulbs-load-more\"> MUST have a `src` attribute;');\n  }\n\n  attachedCallback () {\n    this.addEventListener('click', this.handleClick.bind(this));\n  }\n\n  handleClick () {\n    this.fillLoadingNotification();\n    fetch(this.getAttribute('src'), { credentials: 'include' })\n      .then(filterBadResponse)\n      .then((response) => response.text())\n      .then(this.handleFetchSuccess.bind(this))\n      .catch(this.handleFetchError.bind(this))\n    ;\n  }\n\n  fillLoadingNotification () {\n    const html = '<i class=\"fa fa-spinner fa-spin\"></i> Loading...';\n    this.innerHTML = html;\n  }\n\n  handleFetchSuccess (htmlText) {\n    this.outerHTML = htmlText;\n  }\n\n  handleFetchError () {\n    this.outerHTML = '<span>There was an error fetching more content. Please reload page and try again.</span>';\n  }\n}\n\nLoadMore.extends = 'button';\n\nregisterElement('bulbs-load-more', LoadMore);\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-load-more/bulbs-load-more.js"],"sourceRoot":""}