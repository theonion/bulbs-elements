{"version":3,"sources":["webpack:///bulbs-slideshow.js","webpack:///./elements/bulbs-slideshow/bulbs-slideshow.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_defaults","obj","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","getInitialSlideIndex","hash","index","parseInt","match","_register","_util","BulbsSlideshow","_BulbsHTMLElement","this","apply","arguments","attachedCallback","slidesClicked","$element","$","$slideshow","find","$navigation","$navigationLinks","$restartLink","$slideCount","filter","on","createNavigationLinkClickHandler","handleRestartLinkClick","bind","flexslider","animation","animationLoop","animationSpeed","controlNav","directionNav","keyboard","namespace","slideshow","startAt","window","location","smoothHeight","start","render","after","afterSlideTransition","flexSlider","data","direction","event","currentTarget","preventDefault","hasClass","flexAnimate","getTarget","displayCurrentSlideNumber","updateNavigationState","fillPictures","count","currentSlide","currentSlideNumber","text","removeClass","isOnLastSlide","disableNextLinks","isOnFirstSlide","disablePreviousLinks","addClass","picturefill","navigateToNextSlide","sendPageView","setupGA","readingListProps","prepReadingListAnalytics","dimension12","analyticsManager","analyticsWrapper","title","trackPageView","BulbsHTMLElement","registerElement","default","388"],"mappings":"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","file":"bulbs-slideshow.js","sourcesContent":["webpackJsonp([27],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _register = __webpack_require__(1);\n\t\n\tvar _util = __webpack_require__(189);\n\t\n\t__webpack_require__(388);\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tfunction getInitialSlideIndex(hash) {\n\t  var index = 0;\n\t  if (hash.length > 1) {\n\t    index = parseInt(hash.match(/(\\d+)/)[1], 10) - 1;\n\t  }\n\t  return index;\n\t}\n\t\n\tvar BulbsSlideshow = function (_BulbsHTMLElement) {\n\t  _inherits(BulbsSlideshow, _BulbsHTMLElement);\n\t\n\t  function BulbsSlideshow() {\n\t    _classCallCheck(this, BulbsSlideshow);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsHTMLElement.apply(this, arguments));\n\t  }\n\t\n\t  BulbsSlideshow.prototype.attachedCallback = function attachedCallback() {\n\t    this.slidesClicked = 0;\n\t    var $element = $(this);\n\t    this.$slideshow = $element.find('.slideshow');\n\t    this.$navigation = $element.find('nav');\n\t    this.$navigationLinks = this.$navigation.find('a');\n\t    this.$restartLink = $element.find('.slides-restart a');\n\t    this.$slideCount = $element.find('.slidecount');\n\t    this.$navigationLinks.filter('.next').on('click', this.createNavigationLinkClickHandler('next'));\n\t    this.$navigationLinks.filter('.prev').on('click', this.createNavigationLinkClickHandler('prev'));\n\t    this.$restartLink.on('click', this.handleRestartLinkClick.bind(this));\n\t    this.$slideshow.flexslider({\n\t      animation: 'fade',\n\t      animationLoop: false,\n\t      animationSpeed: 0,\n\t      controlNav: false,\n\t      directionNav: false,\n\t      keyboard: true,\n\t      namespace: 'slides-',\n\t      slideshow: false,\n\t      startAt: getInitialSlideIndex(window.location.hash),\n\t      smoothHeight: true,\n\t      start: this.render.bind(this),\n\t      after: this.afterSlideTransition.bind(this)\n\t    });\n\t    this.flexSlider = this.$slideshow.data('flexslider');\n\t  };\n\t\n\t  BulbsSlideshow.prototype.createNavigationLinkClickHandler = function createNavigationLinkClickHandler(direction) {\n\t    return function (event) {\n\t      var $element = $(event.currentTarget);\n\t      event.preventDefault();\n\t      if (!$element.hasClass('slides-disabled')) {\n\t        this.flexSlider.flexAnimate(this.flexSlider.getTarget(direction));\n\t      }\n\t    }.bind(this);\n\t  };\n\t\n\t  BulbsSlideshow.prototype.handleRestartLinkClick = function handleRestartLinkClick(event) {\n\t    event.preventDefault();\n\t    this.flexSlider.flexslider(0);\n\t  };\n\t\n\t  BulbsSlideshow.prototype.render = function render() {\n\t    this.displayCurrentSlideNumber();\n\t    this.updateNavigationState();\n\t    this.fillPictures();\n\t  };\n\t\n\t  BulbsSlideshow.prototype.displayCurrentSlideNumber = function displayCurrentSlideNumber() {\n\t    var count = this.flexSlider.count;\n\t    var currentSlide = this.currentSlideNumber();\n\t    this.$slideCount.text(currentSlide + ' of ' + count);\n\t  };\n\t\n\t  BulbsSlideshow.prototype.currentSlideNumber = function currentSlideNumber() {\n\t    return this.flexSlider.currentSlide + 1;\n\t  };\n\t\n\t  BulbsSlideshow.prototype.updateNavigationState = function updateNavigationState() {\n\t    this.$navigationLinks.removeClass('slides-disabled');\n\t\n\t    if (this.isOnLastSlide()) {\n\t      this.disableNextLinks();\n\t    }\n\t\n\t    if (this.isOnFirstSlide()) {\n\t      this.disablePreviousLinks();\n\t    }\n\t  };\n\t\n\t  BulbsSlideshow.prototype.isOnLastSlide = function isOnLastSlide() {\n\t    return this.currentSlideNumber() === this.flexSlider.count;\n\t  };\n\t\n\t  BulbsSlideshow.prototype.isOnFirstSlide = function isOnFirstSlide() {\n\t    return this.currentSlideNumber() === 1;\n\t  };\n\t\n\t  BulbsSlideshow.prototype.disableNextLinks = function disableNextLinks() {\n\t    this.$navigationLinks.filter('.next').addClass('slides-disabled');\n\t  };\n\t\n\t  BulbsSlideshow.prototype.disablePreviousLinks = function disablePreviousLinks() {\n\t    this.$navigationLinks.filter('.prev').addClass('slides-disabled');\n\t  };\n\t\n\t  BulbsSlideshow.prototype.fillPictures = function fillPictures() {\n\t    window.picturefill('.slides li, .endcard .summary');\n\t  };\n\t\n\t  BulbsSlideshow.prototype.afterSlideTransition = function afterSlideTransition() {\n\t    this.render();\n\t    this.navigateToNextSlide();\n\t    this.sendPageView();\n\t  };\n\t\n\t  BulbsSlideshow.prototype.setupGA = function setupGA() {\n\t    var readingListProps = (0, _util.prepReadingListAnalytics)(this.$slideshow, { dimension12: 'slideshow' });\n\t    var analyticsManager = readingListProps.analyticsManager,\n\t        analyticsWrapper = readingListProps.analyticsWrapper,\n\t        title = readingListProps.title;\n\t\n\t\n\t    this.analyticsManager = analyticsManager;\n\t    this.analyticsWrapper = analyticsWrapper;\n\t    this.title = title;\n\t  };\n\t\n\t  BulbsSlideshow.prototype.sendPageView = function sendPageView() {\n\t    if (!this.analyticsManager) {\n\t      this.setupGA();\n\t    }\n\t\n\t    this.analyticsManager.trackPageView(false, this.title, this.analyticsWrapper);\n\t  };\n\t\n\t  BulbsSlideshow.prototype.navigateToNextSlide = function navigateToNextSlide() {\n\t    window.location.hash = 'slide' + this.currentSlideNumber();\n\t  };\n\t\n\t  return BulbsSlideshow;\n\t}(_register.BulbsHTMLElement);\n\t\n\t(0, _register.registerElement)('bulbs-slideshow', BulbsSlideshow);\n\t\n\texports.default = BulbsSlideshow;\n\n/***/ }),\n\n/***/ 388:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// bulbs-slideshow.js","import {\n  registerElement,\n  BulbsHTMLElement,\n} from 'bulbs-elements/register';\nimport { prepReadingListAnalytics } from 'bulbs-elements/util';\nimport './bulbs-slideshow.scss';\n\nfunction getInitialSlideIndex (hash) {\n  let index = 0;\n  if (hash.length > 1) {\n    index = parseInt(hash.match(/(\\d+)/)[1], 10) - 1;\n  }\n  return index;\n}\n\nclass BulbsSlideshow extends BulbsHTMLElement {\n  attachedCallback () {\n    this.slidesClicked = 0;\n    let $element = $(this);\n    this.$slideshow = $element.find('.slideshow');\n    this.$navigation = $element.find('nav');\n    this.$navigationLinks = this.$navigation.find('a');\n    this.$restartLink = $element.find('.slides-restart a');\n    this.$slideCount = $element.find('.slidecount');\n    this.$navigationLinks.filter('.next').on('click', this.createNavigationLinkClickHandler('next'));\n    this.$navigationLinks.filter('.prev').on('click', this.createNavigationLinkClickHandler('prev'));\n    this.$restartLink.on('click', this.handleRestartLinkClick.bind(this));\n    this.$slideshow.flexslider({\n      animation: 'fade',\n      animationLoop: false,\n      animationSpeed: 0,\n      controlNav: false,\n      directionNav: false,\n      keyboard: true,\n      namespace: 'slides-',\n      slideshow: false,\n      startAt: getInitialSlideIndex(window.location.hash),\n      smoothHeight: true,\n      start: this.render.bind(this),\n      after: this.afterSlideTransition.bind(this),\n    });\n    this.flexSlider = this.$slideshow.data('flexslider');\n  }\n\n  createNavigationLinkClickHandler (direction) {\n    return function (event) {\n      let $element = $(event.currentTarget);\n      event.preventDefault();\n      if (!$element.hasClass('slides-disabled')) {\n        this.flexSlider.flexAnimate(this.flexSlider.getTarget(direction));\n      }\n    }.bind(this);\n  }\n\n  handleRestartLinkClick (event) {\n    event.preventDefault();\n    this.flexSlider.flexslider(0);\n  }\n\n  render () {\n    this.displayCurrentSlideNumber();\n    this.updateNavigationState();\n    this.fillPictures();\n  }\n\n  displayCurrentSlideNumber () {\n    let count = this.flexSlider.count;\n    let currentSlide = this.currentSlideNumber();\n    this.$slideCount.text(`${currentSlide} of ${count}`);\n  }\n\n  currentSlideNumber () {\n    return this.flexSlider.currentSlide + 1;\n  }\n\n  updateNavigationState () {\n    this.$navigationLinks.removeClass('slides-disabled');\n\n    if (this.isOnLastSlide()) {\n      this.disableNextLinks();\n    }\n\n    if (this.isOnFirstSlide()) {\n      this.disablePreviousLinks();\n    }\n  }\n\n  isOnLastSlide () {\n    return this.currentSlideNumber() === this.flexSlider.count;\n  }\n\n  isOnFirstSlide () {\n    return this.currentSlideNumber() === 1;\n  }\n\n  disableNextLinks () {\n    this.$navigationLinks.filter('.next').addClass('slides-disabled');\n  }\n\n  disablePreviousLinks () {\n    this.$navigationLinks.filter('.prev').addClass('slides-disabled');\n  }\n\n  fillPictures () {\n    window.picturefill('.slides li, .endcard .summary');\n  }\n\n  afterSlideTransition () {\n    this.render();\n    this.navigateToNextSlide();\n    this.sendPageView();\n  }\n\n  setupGA () {\n    const readingListProps = prepReadingListAnalytics(this.$slideshow, { dimension12: 'slideshow' });\n    const { analyticsManager, analyticsWrapper, title } = readingListProps;\n\n    this.analyticsManager = analyticsManager;\n    this.analyticsWrapper = analyticsWrapper;\n    this.title = title;\n  }\n\n  sendPageView () {\n    if (!this.analyticsManager) {\n      this.setupGA();\n    }\n\n    this.analyticsManager.trackPageView(\n      false,\n      this.title,\n      this.analyticsWrapper\n    );\n  }\n\n  navigateToNextSlide () {\n    window.location.hash = `slide${this.currentSlideNumber()}`;\n  }\n}\n\nregisterElement('bulbs-slideshow', BulbsSlideshow);\n\nexport default BulbsSlideshow;\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-slideshow/bulbs-slideshow.js"],"sourceRoot":""}