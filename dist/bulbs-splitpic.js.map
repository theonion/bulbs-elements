{"version":3,"sources":["webpack:///bulbs-splitpic.js","webpack:///./elements/bulbs-splitpic/bulbs-splitpic.js","webpack:///./elements/bulbs-splitpic/splitpic.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_register","_splitpic","_invariant","_invariant2","BulbsSplitpic","_BulbsHTMLElement","this","apply","arguments","attachedCallback","attributes","orientation","setImageSrc","setImageSize","setStartPercent","splitPic","SplitPic","SplitPicVertical","size","$element","$","$imageContainer","find","addClass","percent","data","imageUrl","direction","imgNode","src","BulbsHTMLElement","registerElement","390","element","updateSplit","x","isRelative","relativeX","elOffset","el","offset","left","leftPane","css","bar","width","infoHidden","isMoving","lastX","lastY","startPercentage","eq","isNaN","on","event","touches","fadeOut","originalEvent","touch","dx","dy","pageX","pageY","Math","abs","preventDefault","y","relativeY","top","overPane","height","setInitialPosition","parseInt","attr","img","complete","document","ready","bind","391"],"mappings":"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","file":"bulbs-splitpic.js","sourcesContent":["webpackJsonp([29],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _register = __webpack_require__(1);\n\t\n\tvar _splitpic = __webpack_require__(390);\n\t\n\tvar _invariant = __webpack_require__(36);\n\t\n\tvar _invariant2 = _interopRequireDefault(_invariant);\n\t\n\t__webpack_require__(391);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar BulbsSplitpic = function (_BulbsHTMLElement) {\n\t  _inherits(BulbsSplitpic, _BulbsHTMLElement);\n\t\n\t  function BulbsSplitpic() {\n\t    _classCallCheck(this, BulbsSplitpic);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsHTMLElement.apply(this, arguments));\n\t  }\n\t\n\t  BulbsSplitpic.prototype.attachedCallback = function attachedCallback() {\n\t    (0, _invariant2.default)(this.attributes.orientation.value, 'BulbsSplitpic: orientation attribute is required');\n\t    this.orientation = this.attributes.orientation.value;\n\t\n\t    if (this.attributes['bs-right-image']) {\n\t      this.setImageSrc(this.attributes['bs-right-image'].value, 'right');\n\t    }\n\t\n\t    if (this.attributes['bs-left-image']) {\n\t      this.setImageSrc(this.attributes['bs-left-image'].value, 'left');\n\t    }\n\t\n\t    if (this.attributes['bs-image-size']) {\n\t      this.setImageSize(this.attributes['bs-image-size'].value);\n\t    }\n\t\n\t    if (this.attributes['bs-start-percent']) {\n\t      this.setStartPercent(this.attributes['bs-start-percent'].value);\n\t    }\n\t\n\t    if (this.orientation === 'horizontal') {\n\t      this.splitPic = new _splitpic.SplitPic(this);\n\t    }\n\t\n\t    if (this.orientation === 'vertical') {\n\t      this.splitPic = new _splitpic.SplitPicVertical(this);\n\t    }\n\t  };\n\t\n\t  BulbsSplitpic.prototype.setImageSize = function setImageSize(size) {\n\t    var $element = $(this);\n\t\n\t    var $imageContainer = $element.find('.splitpic-images');\n\t    $imageContainer.addClass('size-' + size);\n\t  };\n\t\n\t  BulbsSplitpic.prototype.setStartPercent = function setStartPercent(percent) {\n\t    var $element = $(this);\n\t    var $imageContainer = $element.find('.splitpic-images');\n\t\n\t    $imageContainer.data('start-percent', percent);\n\t  };\n\t\n\t  BulbsSplitpic.prototype.setImageSrc = function setImageSrc(imageUrl, direction) {\n\t    var $element = $(this);\n\t    var imgNode = $element.find('.splitpic-' + direction + '-image img')[0];\n\t\n\t    imgNode.src = imageUrl;\n\t  };\n\t\n\t  return BulbsSplitpic;\n\t}(_register.BulbsHTMLElement);\n\t\n\t(0, _register.registerElement)('bulbs-splitpic', BulbsSplitpic);\n\t\n\texports.default = BulbsSplitpic;\n\n/***/ }),\n\n/***/ 390:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.SplitPic = SplitPic;\n\texports.SplitPicVertical = SplitPicVertical;\n\tfunction SplitPic(element) {\n\t  var el = $(element);\n\t  var leftPane = $('.splitpic-left-image', el);\n\t  var bar = $('.splitpic-bar', el);\n\t  var infoHidden = false;\n\t  var isMoving = false;\n\t  var lastX = 0;\n\t  var lastY = 0;\n\t  var startPercentage = el.find('.splitpic-images').eq(0).data('start-percent');\n\t\n\t  // split the image at the cursor\n\t  function updateSplit(x, isRelative) {\n\t    var relativeX = void 0;\n\t\n\t    if (!isRelative) {\n\t      var elOffset = el.offset();\n\t      relativeX = x - elOffset.left;\n\t    } else {\n\t      relativeX = x;\n\t    }\n\t\n\t    leftPane.css('clip', 'rect(0px, ' + relativeX + 'px, auto, 0px)');\n\t    bar.css('left', relativeX - bar.width() / 2 + 'px');\n\t  }\n\t\n\t  // how much of the left image should we show at start? 50% if not specified\n\t  if (isNaN(startPercentage)) {\n\t    startPercentage = 50;\n\t  }\n\t\n\t  startPercentage /= 100;\n\t  updateSplit(el.width() * startPercentage, true);\n\t\n\t  el.on('touchmove touchstart', function (event) {\n\t    var touches = void 0;\n\t\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t\n\t    if (event.touches) {\n\t      touches = event.touches;\n\t    } else if (event.originalEvent && event.originalEvent.touches) {\n\t      touches = event.originalEvent.touches;\n\t    }\n\t\n\t    if (touches) {\n\t      var touch = touches[0];\n\t      var dx = 0;\n\t      var dy = 0;\n\t\n\t      if (isMoving) {\n\t        dx = touch.pageX - lastX;\n\t        dy = touch.pageY - lastY;\n\t      } else {\n\t        isMoving = true;\n\t      }\n\t\n\t      // if we move a bit and it's laterally\n\t      if (Math.abs(dx) > Math.abs(dy)) {\n\t        event.preventDefault();\n\t        updateSplit(touches[0].pageX);\n\t      }\n\t\n\t      lastX = touch.pageX;\n\t      lastY = touch.pageY;\n\t    }\n\t  });\n\t\n\t  el.on('touchend', function () {\n\t    isMoving = false;\n\t  });\n\t\n\t  el.on('mouseenter mousemove mouseleave', function (event) {\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t    updateSplit(event.pageX);\n\t  });\n\t}\n\t\n\tfunction SplitPicVertical(element) {\n\t  var el = $(element);\n\t  var overPane = $('.splitpic-left-image', el);\n\t  var bar = $('.splitpic-bar', el);\n\t  var infoHidden = false;\n\t  var img = $('.splitpic-left-image img', element);\n\t  var isMoving = false;\n\t  var lastX = 0;\n\t  var lastY = 0;\n\t\n\t  // split the image at the cursor\n\t  function updateSplit(y, isRelative) {\n\t    var relativeY = void 0;\n\t    if (!isRelative) {\n\t      var elOffset = el.offset();\n\t      relativeY = y - elOffset.top;\n\t    } else {\n\t      relativeY = y;\n\t    }\n\t\n\t    overPane.css('clip', 'rect(' + relativeY + 'px, auto, auto, 0px)');\n\t    bar.css('top', relativeY - bar.height() / 2 + 'px');\n\t  }\n\t\n\t  // this is necessary since we're using original crops and therefore the\n\t  // image height won't be known until it's loaded.\n\t  function setInitialPosition() {\n\t    // how much of the left image should we show at start? 50% if not specified\n\t    var startPercentage = parseInt(el.attr('data-start-percent'), 10);\n\t\n\t    if (isNaN(startPercentage)) {\n\t      startPercentage = 50;\n\t    }\n\t\n\t    startPercentage /= 100;\n\t    updateSplit(el.height() * startPercentage, true);\n\t  }\n\t\n\t  if (img[0].complete) {\n\t    setInitialPosition();\n\t  } else {\n\t    $(document).ready(setInitialPosition.bind(this));\n\t  }\n\t\n\t  el.on('touchmove touchstart', function (event) {\n\t    var touches = void 0;\n\t\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t\n\t    if (event.touches) {\n\t      touches = event.touches;\n\t    } else if (event.originalEvent && event.originalEvent.touches) {\n\t      touches = event.originalEvent.touches;\n\t    }\n\t\n\t    if (touches) {\n\t      var touch = touches[0];\n\t      var dx = 0;\n\t      var dy = 0;\n\t\n\t      if (isMoving) {\n\t        dx = touch.pageX - lastX;\n\t        dy = touch.pageY - lastY;\n\t      } else {\n\t        dy = 0.001; // HACK: so it's not equal to dx and immediately updates\n\t        isMoving = true;\n\t      }\n\t      // if we move a bit and it's vertically and not too fast\n\t      if (Math.abs(dy) > Math.abs(dx) && Math.abs(dy) < 10) {\n\t        event.preventDefault();\n\t        updateSplit(touch.pageY);\n\t      }\n\t\n\t      lastX = touch.pageX;\n\t      lastY = touch.pageY;\n\t    }\n\t  });\n\t\n\t  el.on('touchend', function () {\n\t    isMoving = false;\n\t  });\n\t\n\t  el.on('mouseenter mousemove mouseleave', function (event) {\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t\n\t    updateSplit(event.pageY);\n\t  });\n\t}\n\n/***/ }),\n\n/***/ 391:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// bulbs-splitpic.js","import { registerElement, BulbsHTMLElement } from 'bulbs-elements/register';\nimport { SplitPic, SplitPicVertical } from './splitpic';\nimport invariant from 'invariant';\nimport './bulbs-splitpic.scss';\n\nclass BulbsSplitpic extends BulbsHTMLElement {\n  attachedCallback () {\n    invariant(this.attributes.orientation.value, 'BulbsSplitpic: orientation attribute is required');\n    this.orientation = this.attributes.orientation.value;\n\n    if (this.attributes['bs-right-image']) {\n      this.setImageSrc(this.attributes['bs-right-image'].value, 'right');\n    }\n\n    if (this.attributes['bs-left-image']) {\n      this.setImageSrc(this.attributes['bs-left-image'].value, 'left');\n    }\n\n    if (this.attributes['bs-image-size']) {\n      this.setImageSize(this.attributes['bs-image-size'].value);\n    }\n\n    if (this.attributes['bs-start-percent']) {\n      this.setStartPercent(this.attributes['bs-start-percent'].value);\n    }\n\n    if (this.orientation === 'horizontal') {\n      this.splitPic = new SplitPic(this);\n    }\n\n    if (this.orientation === 'vertical') {\n      this.splitPic = new SplitPicVertical(this);\n    }\n  }\n\n  setImageSize (size) {\n    const $element = $(this);\n\n    let $imageContainer = $element.find('.splitpic-images');\n    $imageContainer.addClass(`size-${size}`);\n  }\n\n  setStartPercent (percent) {\n    const $element = $(this);\n    let $imageContainer = $element.find('.splitpic-images');\n\n    $imageContainer.data('start-percent', percent);\n  }\n\n  setImageSrc (imageUrl, direction) {\n    let $element = $(this);\n    let imgNode = $element.find(`.splitpic-${direction}-image img`)[0];\n\n    imgNode.src = imageUrl;\n  }\n}\n\nregisterElement('bulbs-splitpic', BulbsSplitpic);\n\nexport default BulbsSplitpic;\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-splitpic/bulbs-splitpic.js","export function SplitPic (element) {\n  let el = $(element);\n  let leftPane = $('.splitpic-left-image', el);\n  let bar = $('.splitpic-bar', el);\n  let infoHidden = false;\n  let isMoving = false;\n  let lastX = 0;\n  let lastY = 0;\n  let startPercentage = el.find('.splitpic-images').eq(0).data('start-percent');\n\n  // split the image at the cursor\n  function updateSplit (x, isRelative) {\n    let relativeX;\n\n    if (!isRelative) {\n      let elOffset = el.offset();\n      relativeX = x - elOffset.left;\n    }\n    else {\n      relativeX = x;\n    }\n\n    leftPane.css('clip', 'rect(0px, ' + relativeX + 'px, auto, 0px)');\n    bar.css('left', relativeX - bar.width() / 2 + 'px');\n  }\n\n  // how much of the left image should we show at start? 50% if not specified\n  if (isNaN(startPercentage)) {\n    startPercentage = 50;\n  }\n\n  startPercentage /= 100;\n  updateSplit(el.width() * startPercentage, true);\n\n  el.on('touchmove touchstart', function (event) {\n    let touches;\n\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n\n    if (event.touches) {\n      touches = event.touches;\n    }\n    else if (event.originalEvent && event.originalEvent.touches) {\n      touches = event.originalEvent.touches;\n    }\n\n    if (touches) {\n      let touch = touches[0];\n      let dx = 0;\n      let dy = 0;\n\n      if (isMoving) {\n        dx = touch.pageX - lastX;\n        dy = touch.pageY - lastY;\n      }\n      else {\n        isMoving = true;\n      }\n\n      // if we move a bit and it's laterally\n      if (Math.abs(dx) > Math.abs(dy)) {\n        event.preventDefault();\n        updateSplit(touches[0].pageX);\n      }\n\n      lastX = touch.pageX;\n      lastY = touch.pageY;\n    }\n  });\n\n  el.on('touchend', function () {\n    isMoving = false;\n  });\n\n  el.on('mouseenter mousemove mouseleave', function (event) {\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n    updateSplit(event.pageX);\n  });\n}\n\nexport function SplitPicVertical (element) {\n  let el = $(element);\n  let overPane = $('.splitpic-left-image', el);\n  let bar = $('.splitpic-bar', el);\n  let infoHidden = false;\n  let img = $('.splitpic-left-image img', element);\n  let isMoving = false;\n  let lastX = 0;\n  let lastY = 0;\n\n  // split the image at the cursor\n  function updateSplit (y, isRelative) {\n    let relativeY;\n    if (!isRelative) {\n      let elOffset = el.offset();\n      relativeY = y - elOffset.top;\n    }\n    else {\n      relativeY = y;\n    }\n\n    overPane.css('clip', 'rect(' + relativeY + 'px, auto, auto, 0px)');\n    bar.css('top', relativeY - bar.height() / 2 + 'px');\n  }\n\n  // this is necessary since we're using original crops and therefore the\n  // image height won't be known until it's loaded.\n  function setInitialPosition () {\n    // how much of the left image should we show at start? 50% if not specified\n    let startPercentage = parseInt(el.attr('data-start-percent'), 10);\n\n    if (isNaN(startPercentage)) {\n      startPercentage = 50;\n    }\n\n    startPercentage /= 100;\n    updateSplit(el.height() * startPercentage, true);\n  }\n\n  if (img[0].complete) {\n    setInitialPosition();\n  }\n  else {\n    $( document ).ready(setInitialPosition.bind(this));\n  }\n\n  el.on('touchmove touchstart', function (event) {\n    let touches;\n\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n\n    if (event.touches) {\n      touches = event.touches;\n    }\n    else if (event.originalEvent && event.originalEvent.touches) {\n      touches = event.originalEvent.touches;\n    }\n\n    if (touches) {\n      let touch = touches[0];\n      let dx = 0;\n      let dy = 0;\n\n      if (isMoving) {\n        dx = touch.pageX - lastX;\n        dy = touch.pageY - lastY;\n      }\n      else {\n        dy = 0.001; // HACK: so it's not equal to dx and immediately updates\n        isMoving = true;\n      }\n      // if we move a bit and it's vertically and not too fast\n      if (Math.abs(dy) > Math.abs(dx) && Math.abs(dy) < 10) {\n        event.preventDefault();\n        updateSplit(touch.pageY);\n      }\n\n      lastX = touch.pageX;\n      lastY = touch.pageY;\n    }\n  });\n\n  el.on('touchend', function () {\n    isMoving = false;\n  });\n\n  el.on('mouseenter mousemove mouseleave', function (event) {\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n\n    updateSplit(event.pageY);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-splitpic/splitpic.js"],"sourceRoot":""}