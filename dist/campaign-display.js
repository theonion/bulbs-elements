webpackJsonp([37],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.displayPropType=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(187),l=r(c),u=n(36),f=r(u),y=n(273),d=r(y),m=n(1),h=n(189);n(370);var g=n(372),b=r(g),P=n(373),O=r(P),v=n(374),w=r(v),j=function(e){function t(n){return i(this,t),(0,f.default)(!!n.placement,"campaign-display component requires a placement"),a(this,e.call(this,n))}return p(t,e),t.prototype.initialDispatch=function(){this.props.src&&this.store.actions.fetchCampaign(this.props.src)},t.prototype.componentDidUpdate=function(e){this.props.src!==e.src&&(this.store.actions.handleFetchComplete(null),this.initialDispatch())},t.prototype.render=function(){if(this.state.campaignRequest.networkError)return l.default.createElement("span",null);var e=s({},this.state,this.props,{nameOnly:"string"==typeof this.props.nameOnly,logoOnly:"string"==typeof this.props.logoOnly,noPixel:"string"==typeof this.props.noPixel,noLink:"string"==typeof this.props.noLink});return l.default.createElement(w.default,e)},t}(d.default);s(j,{displayName:"CampaignDisplay",schema:{campaign:b.default,campaignRequest:O.default},propTypes:{logoOnly:c.PropTypes.string,nameOnly:c.PropTypes.string,noLink:c.PropTypes.string,noPixel:c.PropTypes.string,placement:c.PropTypes.string.isRequired,preambleText:c.PropTypes.string.isRequired,src:c.PropTypes.string.isRequired}}),(0,m.registerReactElement)("campaign-display",(0,h.loadOnDemand)(j)),t.default=j;t.displayPropType=j.propTypes.display},370:function(e,t){},372:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={actions:{handleFetchComplete:function(e,t){return t}}};t.default=n},373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(189),o={initialState:{requestInFlight:!1},actions:{fetchCampaign:function(e,t,n){return e.requestInFlight=!0,(0,r.makeRequest)(t,{credentials:"include",success:function(e){n.actions.fetchCampaignSuccess(e),n.actions.handleFetchComplete(e)},failure:n.actions.fetchCampaignFailure,error:n.actions.fetchCampaignError}),e},fetchCampaignSuccess:function(e){e.requestInFlight=!1},fetchCampaignFailure:function(e,t){return e.requestInFlight=!1,e.requestFailure=t,e},fetchCampaignError:function(e,t){return e.requestInFlight=!1,e.networkError=t,e}}};t.default=o},374:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var s=n(187),c=r(s),l=n(375),u=r(l),f=n(376),y=r(f),d=n(377),m=r(d),h=n(378),g=r(h),b=n(379),P=r(b),O=function(e){function t(n){return i(this,t),a(this,e.call(this,n))}return p(t,e),t.prototype.hasImageUrl=function(){return!!this.props.campaign.image_url},t.prototype.hasValidCampaign=function(){return!!this.props.campaign},t.prototype.pixelComponent=function(){return this.props.noPixel||!this.props.campaign.active?"":c.default.createElement(P.default,{campaignId:this.props.campaign.id,placement:this.props.placement})},t.prototype.logoComponent=function(){return this.props.logoOnly&&!this.hasImageUrl()?this.sponsorNameComponent():c.default.createElement(y.default,this.props.campaign)},t.prototype.sponsorNameComponent=function(){return c.default.createElement(g.default,this.props.campaign)},t.prototype.preambleTextComponent=function(){return c.default.createElement(m.default,{text:this.props.preambleText})},t.prototype.defaultComponents=function(){return(0,u.default)({dfpPixel:this.pixelComponent(),logo:this.logoComponent(),preamble:this.preambleTextComponent(),sponsorName:this.sponsorNameComponent()})},t.prototype.logoOnlyComponents=function(){return(0,u.default)({dfpPixel:this.pixelComponent(),preamble:this.preambleTextComponent(),logo:this.logoComponent()})},t.prototype.nameOnlyComponents=function(){return(0,u.default)({dfpPixel:this.pixelComponent(),preamble:this.preambleTextComponent(),sponsorName:this.sponsorNameComponent()})},t.prototype.childComponents=function(){var e=void 0;return e=this.props.logoOnly?this.logoOnlyComponents():this.props.nameOnly?this.nameOnlyComponents():this.defaultComponents(),this.props.noLink?e:c.default.createElement("a",{href:this.props.campaign.clickthrough_url},e)},t.prototype.render=function(){return this.hasValidCampaign()?c.default.createElement("div",{className:"campaign-display","data-track-label":this.props.campaign.clickthrough_url},c.default.createElement("div",{className:"campaign-display-inner"},this.childComponents())):c.default.createElement("div",{className:"inactive-campaign"})},t}(s.Component);O.defaultProps={logoOnly:!1,nameOnly:!1,noLink:!1,noPixel:!1},O.propTypes={campaign:s.PropTypes.shape({active:s.PropTypes.bool.isRequired,clickthrough_url:s.PropTypes.string.isRequired,id:s.PropTypes.number.isRequired,image_url:s.PropTypes.string,name:s.PropTypes.string.isRequired}),logoOnly:s.PropTypes.bool,nameOnly:s.PropTypes.bool,noLink:s.PropTypes.bool,noPixel:s.PropTypes.bool,placement:s.PropTypes.string.isRequired,preambleText:s.PropTypes.string.isRequired},t.default=O},375:function(e,t,n){"use strict";function r(e){var t=e&&(v&&e[v]||e[w]);if("function"==typeof t)return t}function o(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+e).replace(t,function(e){return n[e]});return"$"+r}function i(e,t){return e&&"object"==typeof e&&null!=e.key?o(e.key):t.toString(36)}function a(e,t,n,o){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||"object"===p&&e.$$typeof===m)return n(o,e,""===t?P+i(e,0):t),1;var s,c,l=0,u=""===t?P:t+O;if(Array.isArray(e))for(var f=0;f<e.length;f++)s=e[f],c=u+i(s,f),l+=a(s,c,n,o);else{var y=r(e);if(y)for(var d,h=y.call(e),b=0;!(d=h.next()).done;)s=d.value,c=u+i(s,b++),l+=a(s,c,n,o);else if("object"===p){var v="",w=""+e;g(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===w?"object with keys {"+Object.keys(e).join(", ")+"}":w,v)}}return l}function p(e,t,n){return null==e?0:a(e,"",t,n)}function s(e){return(""+e).replace(j,"$&/")}function c(e,t){return d.cloneElement(e,{key:t},void 0!==e.props?e.props.children:void 0)}function l(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var r=e.result,o=e.keyPrefix,i=e.func,a=e.context,p=i.call(a,t,e.count++);Array.isArray(p)?f(p,r,n,h.thatReturnsArgument):null!=p&&(d.isValidElement(p)&&(p=c(p,o+(!p.key||t&&t.key===p.key?"":s(p.key)+"/")+n)),r.push(p))}function f(e,t,n,r,o){var i="";null!=n&&(i=s(n)+"/");var a=l.getPooled(t,i,r,o);p(e,u,a),l.release(a)}function y(e){if("object"!=typeof e||!e||Array.isArray(e))return b(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(d.isValidElement(e))return b(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;g(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var n in e)f(e[n],t,n,h.thatReturnsArgument);return t}var d=n(187),m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,h=n(22),g=n(14),b=n(21),P=".",O=":",v="function"==typeof Symbol&&Symbol.iterator,w="@@iterator",j=/\/+/g,T=10,E=C,C=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},_=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||E,n.poolSize||(n.poolSize=T),n.release=x,n},x=function(e){var t=this;g(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},R=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)};l.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},_(l,R);e.exports=y},376:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var s=n(187),c=r(s),l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return p(t,e),t.prototype.render=function(){return c.default.createElement("div",{className:"campaign-display-logo"},c.default.createElement("img",{src:this.props.image_url}))},t}(s.Component);t.default=l,l.propTypes={image_url:s.PropTypes.string.isRequired,noLink:s.PropTypes.bool}},377:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement("span",{className:"campaign-display-preamble"},e.text)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(187),a=r(i);o.propTypes={text:i.PropTypes.string.isRequired}},378:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var s=n(187),c=r(s),l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return p(t,e),t.prototype.render=function(){return c.default.createElement("span",{className:"campaign-display-sponsor-name"},this.props.name)},t}(s.Component);t.default=l,l.propTypes={name:s.PropTypes.string.isRequired,noLink:s.PropTypes.bool}},379:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var s=n(187),c=r(s),l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return p(t,e),t.prototype.componentDidMount=function(){var e=window.BULBS_ELEMENTS_ADS_MANAGER;"undefined"!=typeof e&&"function"==typeof e.loadAds?e.loadAds(this.refs.container):console.warn("<campaign-display> pixel will not trigger since `window.BULBS_ELEMENTS_ADS_MANAGER` is not configured to an AdsManager instance.")},t.prototype.render=function(){var e={dfp_placement:this.props.placement,dfp_campaign_id:this.props.campaignId};return c.default.createElement("div",{ref:"container",className:"dfp","data-ad-unit":"campaign-pixel","data-targeting":JSON.stringify(e)})},t}(s.Component);t.default=l,l.displayName="DfpPixel",l.propTypes={campaignId:s.PropTypes.number.isRequired,placement:s.PropTypes.string.isRequired}}});
//# sourceMappingURL=campaign-display.js.map